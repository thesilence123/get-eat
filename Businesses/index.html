<!DOCTYPE html>
<html lang="he" ng-app="myApp"  ng-controller="homeCtrl" class="ng-cloak" dir="rtl" encoding="UTF-8">
  <head>
    <style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title ng-bind="title"> GetEat </title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- for touch devices-->
    <link rel="icon" href="favicon.ico">
    <!--<link rel="stylesheet" href="https://gitcdn.xyz/repo/angular/bower-material/master/angular-material.css">-->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.11.2/angular-material.min.css">
    <link rel="stylesheet" href="app/assets/libs/angular-loading-bar-master/src/loading-bar.css">
    <link rel="stylesheet" href="app/assets/css/app.css">
    <link rel="stylesheet" href="app/assets/css/main.css">
    <link rel="stylesheet" href="app/assets/css/animate.css">
    <link rel="styleSheet" href="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-grid/3.0.7/ui-grid.css"/>
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
  </head>
  <body>
  <header>
      <div id="navigation-bar">
          <img id="nav-logo" src="app/assets/images/get_eat_logo.png"/>
          <div ng-class="{'nav-button-active': active_classes.all_dishes}" class="nav-button" ng-click="showAllDishes()">הכל</div>
          <div ng-class="{'nav-button-active': active_classes.pizza}" class="nav-button" ng-click="showPizzaDishes()">פיצה</div>
          <div ng-class="{'nav-button-active': active_classes.hummus}" class="nav-button" ng-click="showHummusDishes()">חומוס</div>
          <div ng-class="{'nav-button-active': active_classes.falafel}" class="nav-button" ng-click="showFalafelDishes()">פלאפל</div>
          <div ng-class="{'nav-button-active': active_classes.shawarma}" class="nav-button" ng-click="showShawarmaDishes()">שווארמה</div>
          <p id="welcome-guest">אבי</p>
      </div>
  </header>
  <div id="latest-orders" style="margin-bottom: 300px;">
      <div><img style="display:inline-block" src="app/assets/images/box.png" /></div>
      <div><img style="display:inline-block" src="app/assets/images/box.png" /></div>
      <div><img style="display:inline-block" src="app/assets/images/box.png" /></div>
  </div>

  <script type="text/javascript">
      $( document ).ready(function() {
          ClearTable();
          GetOrders2();
      });
      setInterval(function(){
          ClearTable();
          GetOrders2();
      }, 5000);
      function ClearTable(){
          $("#older-orders tbody tr").remove();
      }
      function GetOrders2(){
          var ordersArr = [];
          $.ajax({
              method: "GET",
              url: "https://api.backand.com:443/1/objects/order?pageSize=20&pageNumber=1",
              headers: {"AnonymousToken": "63529d36-5c14-4a0c-b3d1-1336c1401cf3"},
              contentType: 'text/html; charset=UTF-8',
              async: false,
              success: function(response)
              {
                  var idsArr = response.data;
                  for (var i = 0; i < idsArr.length; i++) {
                      $.ajax({
                          method: "GET",
                          url: "https://api.backand.com:443/1/objects/order/"+ idsArr[i].id+"?deep=true",
                          headers: {"AnonymousToken": "63529d36-5c14-4a0c-b3d1-1336c1401cf3"},
                          async: false,
                          success : function(resp){
                              console.log(resp)
                              $("#older-orders").prepend("<tr><td>"+ resp.time.substring(11) +"</td><td>"+ resp.dishes[0].name + "</td><td></td><td>"+ resp.address +"</td><td>0506666666</td></tr>")
                          }
                      })
                  }
              }
          });
          return ordersArr;
      }
  </script>
    <table id="older-orders" style="border-spacing: 0;width:90%; margin-top:100px;text-align: right;margin: 0 auto 0 auto;" >
        <thead>
            <th style="vertical-align: middle;"><img src="app/assets/images/clock.png" style="width:auto;height:32px;"/> תאריך </th>
            <th><img src="app/assets/images/burger.png" style="width:auto;height:32px;"/> מנה </th>
            <th><img src="app/assets/images/sticky-note.png" style="width:auto;height:32px;"/> הערות </th>
            <th><img src="app/assets/images/map-.png" style="width:auto;height:32px;"/> כתובת </th>
            <th><img src="app/assets/images/phone.png" style="width:auto;height:32px;"/> טלפון </th>
        </thead>
        <tbody style="background-color: #eef0ee;border-color:black;border-radius:5px;">

        </tbody>
    </table>
  <ng-view></ng-view>
        <!-- Angular Material Dependencies -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>


        <!-- Angular Material Javascript now available via Google CDN; version 0.11.2 used here -->
        <script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.11.2/angular-material.min.js"></script>
    <!-- Angular Material Dependencies -->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js"></script>-->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.js"></script>-->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.js"></script>-->

    <!--&lt;!&ndash; Angular Material Javascript using GitCDN to load directly from `bower-material/master` &ndash;&gt;-->
    <!--<script src="https://gitcdn.xyz/repo/angular/bower-material/master/angular-material.js"></script>-->

    <script defer src="app/assets/libs/angular-route/angular-route.min.js"></script>
    <script defer src="app/assets/libs/angular-loading-bar-master/build/loading-bar.min.js"></script>

    <script defer src="app/app.js"></script>
    <script defer src="app/app.routes.js"></script>
    <script defer src="app/shared/Home/homeController.js"></script>

    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-grid/3.0.7/ui-grid.min.js"></script>
    <script defer src="//cdnjs.cloudflare.com/ajax/libs/angular-material-icons/0.6.0/angular-material-icons.min.js"></script>


  </body>
</html>
